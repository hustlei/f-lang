# 包管理

flang通过项目(proj)和模块(mod)组织源代码的文件目录物理结构。通过package进行代码逻辑关系和访问权限管理。

包表示模块(mod)内代码逻辑组织结构，与代码源文件物理存储目录结构无直接关系，多个文件可以定义在一个包里，一个文件中也可以有多个包，包可以嵌套。

## 定义包

采用package关键字定义包。

在源代码文件首部定义包，将整个代码文件组织在一个包里。

~~~
package lei.algorithm
~~~

> 默认包内代码仅对本包及本模块内父包可见。

一个文件中也可以有多个包：

~~~
package lei.example{

    def ...
    ...
}
~~~


公共包可以被其他模块引用，用pub package关键字声明公共包：

~~~
pub package lei.algorithm
~~~


## 引用包

flang支持把其他包符号引用、导入到当前文件。方法如下：

~~~flang
//引用某个包
use lei.algorithm  //用`algorithm.sum()`形式来调用
use lei.algorithm as algo  //用`algo.sum()`方式调用
use lei.algorithm.*  //可以直接使用`sum()`方式调用包中的所有的代码
use lei.algorithm.[sum, average]  //引用某个包中的具体类型或函数
use lei.algorithm.[sum as add, average]

//临时引用
using(lei.algorithm.*){
}
~~~

包内相对路径引用方式如下：

~~~flang
use .algorithm
use ..superpackage as sup
use ....supersuper.*
~~~

> use 引用其他模块内的包时，仅能引用公共包。不能够引用其他模块内的默认包。

## 重定向包

使用`pub use`可以把指定包重定向到当前作用域。

~~~flang
package lei.default{
  pub use lei.algorithm.* //把lei.algorithm包内的所有定义重定向到lei.default。
                          //lei.algorithm.sum()将在lei.default.sum()中也可以调用。
  pub use lei.algorithm as algo
}
~~~
